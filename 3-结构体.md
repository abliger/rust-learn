[toc]
# 结构体

## 结构体定义

需要使用 struct 关键字并为整个结构体提供一个名字.结构体的名字需要描述它所组合的数据的意义.接着在大括号中,定义每一部分数据的名字和类型,我们称为字段.如:

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}
```

> 此处的字段类型没有引用类型,是因为引用所指对象可能不存在,需要使用以后介绍的生命周期确保引用有效性.

## 结构体快速初始化

1. 相同字段的可变结构体变量初始化
    ```rust
    // 一般的初始化方式
    let user1 = User {
      active: true,
      username: String::from("someusername123"),
      email: String::from("someone@example.com"),
      sign_in_count: 1,
    };
    // 相同字段的可变结构体变量初始化
    let mut user2 = User {
      email: String::from("another@example.com"),
      ..user1 
    };
    // user1.username 所有权给了 user2 在此之后使用 user1.username会报错
    ```

    第二个变量初始化过程,是移动数据.如果字段是引用类型,它的所有权也会发生变化.


